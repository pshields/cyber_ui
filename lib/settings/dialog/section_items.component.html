<!-- If a label is provided, a legend element will be used, so wrap the output in a fieldset -->
<fieldset *ngIf="label; else unwrapped">
  <ng-container *ngTemplateOutlet="unwrapped"></ng-container>
</fieldset>

<ng-template #unwrapped>
  <legend *ngIf="label" class="settings-section-label">{{label}}</legend>
  <ng-container *ngIf="items">
    <ng-container *ngFor="let item of items">
      <cyber-ui-settings-section-items
          *ngIf="item.items"
          [items]="item.items"
          [label]="item.label"
          [model]="model"
          (changes)="onChange()">
      </cyber-ui-settings-section-items>
      <cyber-ui-form-field
          *ngIf="item.config"
          [field]="item"
          [model]="model"
          (change)="onChange()">
      </cyber-ui-form-field>
    </ng-container>
  </ng-container>
</ng-template>
